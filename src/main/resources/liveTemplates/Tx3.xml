<templateSet group="Tx3">

    <!-- ── Top-level declarations ──────────────────────────────────────── -->

    <template
            name="party"
            value="party $NAME$;"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"MyParty"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="policy"
            value="policy $NAME$ = import($PATH$);"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"MyPolicy"' alwaysStopAt="true"/>
        <variable name="PATH" expression="" defaultValue='"validators/my_script.ak"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="record"
            value="record $NAME$ {&#10;    $FIELD$: $TYPE$,&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"State"' alwaysStopAt="true"/>
        <variable name="FIELD" expression="" defaultValue='"field"' alwaysStopAt="true"/>
        <variable name="TYPE" expression="" defaultValue='"Int"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="tx"
            value="tx $NAME$($PARAMS$) {&#10;    $END$&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"myTx"' alwaysStopAt="true"/>
        <variable name="PARAMS" expression="" defaultValue='""' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <!-- ── Tx body constructs ───────────────────────────────────────────── -->

    <template
            name="inp"
            value="input $NAME$ {&#10;    from: $PARTY$,&#10;    min_amount: Ada($AMOUNT$),&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"source"' alwaysStopAt="true"/>
        <variable name="PARTY" expression="" defaultValue='"Party"' alwaysStopAt="true"/>
        <variable name="AMOUNT" expression="" defaultValue='"quantity"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="inpref"
            value="input $NAME$ {&#10;    ref: $UTXO$,&#10;    redeemer: $REDEEMER$,&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"locked"' alwaysStopAt="true"/>
        <variable name="UTXO" expression="" defaultValue='"utxo_ref"' alwaysStopAt="true"/>
        <variable name="REDEEMER" expression="" defaultValue='"()"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="out"
            value="output {&#10;    to: $TO$,&#10;    amount: $AMOUNT$,&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="TO" expression="" defaultValue='"Receiver"' alwaysStopAt="true"/>
        <variable name="AMOUNT" expression="" defaultValue='"Ada(quantity)"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="outd"
            value="output $NAME$ {&#10;    to: $TO$,&#10;    amount: $AMOUNT$,&#10;    datum: $DATUM$,&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"target"' alwaysStopAt="true"/>
        <variable name="TO" expression="" defaultValue='"Script"' alwaysStopAt="true"/>
        <variable name="AMOUNT" expression="" defaultValue='"Ada(quantity)"' alwaysStopAt="true"/>
        <variable name="DATUM" expression="" defaultValue='"State { }"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="change"
            value="output {&#10;    to: $PARTY$,&#10;    amount: $SOURCE$ - Ada($AMOUNT$) - fees,&#10;}"
            toReformat="true" toShortenFQNames="true">
        <variable name="PARTY" expression="" defaultValue='"Sender"' alwaysStopAt="true"/>
        <variable name="SOURCE" expression="" defaultValue='"source"' alwaysStopAt="true"/>
        <variable name="AMOUNT" expression="" defaultValue='"quantity"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <template
            name="let"
            value="let $NAME$ = $EXPR$;"
            toReformat="true" toShortenFQNames="true">
        <variable name="NAME" expression="" defaultValue='"value"' alwaysStopAt="true"/>
        <variable name="EXPR" expression="" defaultValue='"Ada(quantity)"' alwaysStopAt="true"/>
        <context><option name="TX3" value="true"/></context>
    </template>

    <!-- ── Full protocol skeletons ─────────────────────────────────────── -->

    <template
            name="transfer"
            value="party Sender;&#10;&#10;party Receiver;&#10;&#10;tx transfer(quantity: Int) {&#10;    input source {&#10;        from: Sender,&#10;        min_amount: Ada(quantity),&#10;    }&#10;&#10;    output {&#10;        to: Receiver,&#10;        amount: Ada(quantity),&#10;    }&#10;&#10;    output {&#10;        to: Sender,&#10;        amount: source - Ada(quantity) - fees,&#10;    }&#10;}"
            toReformat="true" toShortenFQNames="true">
        <context><option name="TX3" value="true"/></context>
    </template>

</templateSet>